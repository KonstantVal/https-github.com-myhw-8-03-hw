# Домашнее задание к занятию "Базы данных, их типы - Шмаков Владимир"

---

### Задание 1 СУБД
Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

Приведите ответ в свободной форме.

### Решение 1
1.1. Хорошим выбором в данном случае может быть система управления реляционными базами данных (СУБД), например PostgreSQL или MySQL. Эти СУБД известны своей целостностью данных и структурированной обработкой данных. Они преуспевают в определении четких связей и обеспечивают согласованность данных, что критически важно для финансовой отчетности и прогнозирования рисков.

1.1.* Для потенциальных узких мест хеширования может подойти расширение PostgreSQL «pg_trgm». Другой вариант — использовать специализированную поисковую систему, например, Elasticsearch, для более быстрого извлечения.

1.2. Неплохим выбором будет база данных NoSQL, например, MongoDB или Cassandra. Они очень гибкие и масштабируемые для обработки неструктурированных данных, таких как формы целевых страниц и данные CRM. Они предлагают более быстрые операции чтения/записи, критически важные для обработки данных в реальном времени и управления взаимодействиями с пользователем.

1.2.* Да, одна база данных NoSQL, например MongoDB, может использоваться как для целевых страниц, так и для CRM. Данные могут быть структурированы в различных коллекциях в базе данных с соответствующим дизайном схемы для каждой цели.

1.3. Лучший выбор: СУБД, такие как PostgreSQL или MySQL, подходят благодаря их высокой целостности данных и возможностям структурированной схемы.

1.3.* Да, для этой задачи можно использовать ту же СУБД, которая используется для бюджетирования проекта. Требуется создать отдельную схему или экземпляр базы данных в той же СУБД для хранения корпоративных правил и данных нормативных актов.

1.4. Лучший выбор: графовая база данных, например Neo4j. Поскольку графовые базы данных отлично справляются с управлением отношениями и соединениями, что необходимо для быстрого поиска оптимальных маршрутов и распределения ресурсов. Они разработаны для эффективной навигации по сложным сетям и обеспечивают более быстрые алгоритмы оптимизации маршрутов.

1.4.* Да, возможно. Единая графовая база данных, такая как Neo4j, может использоваться как для логистики, так и для закупок.

1.5.* Это крайне маловероятно. Хотя некоторые задачи можно решать с помощью одной СУБД, единый подход ко всем задачам, скорее всего, приведет к проблемам с производительностью и масштабируемостью.
Рекомендуемый и реалистичный подход – это архитектура с несколькими базами данных и отдельной СУБД для каждой задачи, как правило, является наиболее практичным и эффективным решением.

---

### Задание 2 Транзакции
2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?
Приведите ответ в свободной форме.


### Решение 2
2.1. Описание шести действий, необходимых для успешного ручного пополнения счета телефона:
1.	Запрос пользователя: Пользователь инициирует запрос на пополнение счета, вводя желаемую сумму и номер телефона на платформе пополнения (веб-сайт, мобильное приложение и т. д.).
2.	Проверка: Платформа проверяет введенную информацию:
3.	Обработка платежа.
4.	Обновление баланса: после подтверждения платежа система обновляет баланс счета телефона, добавляя сумму пополнения.
5.	Подтверждение транзакции.
6.	Ведение учета: сведения о транзакциях регистрируются в базе данных системы для целей учета, сверки и отчетности.

2.1.* Процесс пополнения счета с помощью автоплатежа во многом аналогичен, но есть некоторые отличия:
1.	Предварительная авторизация: пользователь настраивает функцию автоплатежа, предоставляя свои платежные реквизиты и указывая сумму и частоту пополнения (например, ежедневно, еженедельно, ежемесячно). Система автоматически авторизует способ оплаты для будущих повторяющихся транзакций.
2.	Запланированное пополнение.
3.	Обработка платежа: система использует предварительно авторизованный способ оплаты для обработки транзакции и списания средств со счета пользователя.
4.	Обновление баланса.
5.	Подтверждение (необязательно): пользователь может получить уведомление, но это не всегда обязательно, поскольку пополнение счета происходит автоматически.
6.	Ведение учета.

---

### Задание 3 SQL vs NoSQL
3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.
Приведите ответ в свободной форме.

### Решение 3
3.1. Пять преимуществ систем SQL перед NoSQL. 
1.	Целостность и согласованность данных: базы данных SQL обеспечивают свойства ACID (атомарность, согласованность, изоляция, долговечность), гарантируя целостность и согласованность данных между транзакциями.
2.	Структурированная модель данных: системы SQL отлично справляются с хранением и запросом структурированных данных через таблицы, столбцы и связи.
3.	Эффективный язык запросов: SQL предлагает мощный и стандартизированный язык запросов с обширными функциями и операторами, что упрощает обработку и анализ данных.
4.	Сильная поддержка транзакций: базы данных SQL обеспечивают надежную поддержку транзакций, позволяя выполнять сложные операции с участием нескольких таблиц и гарантируя целостность данных в ходе всего процесса.
5.	Проверенная технология: Системы SQL имеют зрелые экосистемы с надежными инструментами для администрирования, мониторинга и безопасности, что обеспечивает большую стабильность и поддержку. 

3.1.* Преимущества систем NewSQL перед SQL и NoSQL:
1.	Высокая производительность и масштабируемость: системы NewSQL предлагают масштабируемость и производительность баз данных NoSQL, сохраняя при этом свойства ACID и возможности структурированных запросов баз данных SQL.
2.	Целостность и согласованность данных: системы NewSQL часто реализуют гибридные подходы для обеспечения целостности и согласованности данных, объединяя сильные стороны баз данных SQL и NoSQL.
3.	Гибкое моделирование данных: системы NewSQL допускают определенный уровень гибкости в моделировании данных, предлагая больше возможностей для структурирования данных, чем традиционные базы данных SQL. 
4.	Интеграция с существующими инструментами: системы NewSQL часто поддерживают существующие инструменты и технологии SQL, что упрощает их интеграцию в существующие инфраструктуры и рабочие процессы.
5.	Улучшенная отказоустойчивость: системы NewSQL часто включают распределенные архитектуры и механизмы отказоустойчивости, что делает их более устойчивыми к сбоям и простоям.

В целом, системы NewSQL представляют собой многообещающий подход для приложений, требующих производительности и масштабируемости баз данных NoSQL, сохраняя при этом целостность данных и согласованность баз данных SQL.

---

### Задание 4. Кластеры
Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?


Приведите ответ в свободной форме.

---

### Решение 4

Выбрать правильную СУБД и модель распределенных вычислений для решения масштабной задачи обработки данных с использованием большого количества машин:
Критерии выбора СУБД могут быть следующими:
1.	Масштабируемость и производительность: СУБД должна обладать высокой масштабируемостью, чтобы обрабатывать огромные наборы данных и эффективно распределять рабочую нагрузку между множеством машин.
2.	Возможности параллельной обработки: необходимо поддерживать параллельную обработку, позволяя нескольким машинам одновременно работать с разными частями данных.
3.	Распределение и разделение данных: СУБД должна иметь механизмы для распределения данных по нескольким машинам.
4.	Отказоустойчивость: система должна быть устойчивой к сбоям оборудования, иметь механизмы репликации данных и автоматического переключения на резервный ресурс для обеспечения непрерывной работы.
5.	Язык запросов и API: СУБД должна предоставлять мощный язык запросов и API для эффективного доступа к данным и манипулирования ими, позволяя выполнять сложные вычисления и анализ данных.

Подходящие параметры СУБД:
Базы данных NoSQL:

Apache Cassandra: отлично подходит для распределенного хранения данных и запросов, обладает высокой масштабируемостью и отказоустойчивостью.

MongoDB: обеспечивает гибкость для полуструктурированных данных и горизонтального масштабирования.

Базы данных NewSQL:

CockroachDB: предлагает свойства ACID и совместимость с SQL, а также превосходную масштабируемость и распределенную архитектуру.

Базы данных In-Memory:

Redis: в основном используется для кэширования и быстрого доступа к данным, может комбинироваться с другими базами данных для крупномасштабных вычислений.

Оптимальный выбор:

Для СУБД: Для сложных вычислений с большим набором данных Apache Cassandra или CockroachDB являются сильными претендентами. Cassandra выделяется горизонтальной масштабируемостью и отказоустойчивостью, в то время как CockroachDB предлагает преимущества совместимости с SQL.

Распределенная вычислительная модель: Spark будет наиболее универсальным и эффективным вариантом для этого сценария. Он обрабатывает как пакетную обработку для вычислений, так и потенциально обновления в реальном времени, если это необходимо.

В целом, лучшая комбинация зависит от конкретных требований приложения, включая характер вычислений, объем данных и потребности в реальном времени. Тщательная оценка и сравнительный анализ имеют решающее значение перед развертыванием решения.
